## 모던자바인액션 4장

----

### 4. 스트림

#### 4.1 스트림이란?

데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소



#### 특징

- 선언형
- 조립 가능
- 병렬화



#### 4.3 스트림과 컬렉션

공통점 : **연속된 형식**의 값을 저장하는 자료구조의 인터페이스 제공

차이점 : 데이터를 계산하는 시점



컬렉션은 현재 자료구조가 포함하는 모든 값을 메모리에 저장.

즉, 컬렉션의 모든 요소는 컬렉션에 추가하기 전에 계산되어야 한다. (연산을 수행할 때마다 모든 요소를 컬렉션에 저장해야한다.)



반면, 스트림은 요청할 때만 요소를 계산하는 고정된 자료구조다.



그로인해 한 번만 탐색할 수 있다.

한 번 탐색한 요소를 다시 탐색하려면 같은 스트림을 새로 다시 만들어 줘야한다.

```java
List<String> title = Arrays.asList("java8", "in", "action");
Stream<String> s = title.stream();
s.foreach(System.out::println); // 단어 출력됨
s.foreach(System.out::println); // illegalStateException 스트림이 소비되었거나 닫힘
```



#### 4.4 스트림 연산

filter, map, limit, distinct, sorted 과 같이 연결할 수 있는 스트림 연산을 **중간 연산**이라고 한다.

collect, count, foreach로 **최종 연산**을 실행해 파이프라인을 다음 닫는다.



>  왜 이런식으로 계산할까?

스트림은 게으르다.

중간연산을 실행하기전까지는 아무 연산도 하지 않고, 중간연산을 합쳐서 최종 연산에서 한 번만 연산한다.



**요약**

스트림은 내부 반복을 지원한다!

중간 연산만으로는 어떤 결과도 생성할 수 없다.

게으르기 때문에 최종 연산이 반드시 있어야한다.
